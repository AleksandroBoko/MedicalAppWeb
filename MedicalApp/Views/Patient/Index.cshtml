@using MedicalApp.Domain.Models
@model IList<Patient>

@helper GetRoomName(int id)
{
var rooms = ViewBag.rooms as List<Room>;
if (rooms != null)
{
    var room = rooms.FirstOrDefault(x => x.Id == id);
    if(room != null)
    {
            <td>@room.Number</td>
    }
}
}

<table border="1">
    <caption>
        Patients
    </caption>
    <tr>
        <th>Id</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Age</th>
        <th>Room number</th>
    </tr>    
    @foreach (var entity in Model)
    {
        <tr>
            <td>@entity.Id</td>
            <td>@entity.FirstName</td>
            <td>@entity.LastName</td>
            <td>@entity.Age</td>
            @GetRoomName(entity.Id)

        </tr>
                    }
</table>
